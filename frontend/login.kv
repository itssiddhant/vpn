<LoginScreen>:
    on_leave: app.reset_login_fields()
    FloatLayout:
    
        canvas.before:
            Color:
                rgba: 0.1, 0.1, 0.1, 1  # Dark grey background
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            size_hint: None, None
            size: min(root.width - dp(40), dp(340)), self.minimum_height
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            spacing: dp(20)
            padding: dp(20)
            
            canvas.before:
                Color:
                    rgba: 0.2, 0.2, 0.2, 1  # Light grey for the box
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [15, 15, 15, 15]
                Color:
                    rgba: 0, 0.5, 0, 1  # Green color for border
                Line:
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 15)
                    width: 2  # Border width
            
            MDLabel:
                text: 'Login'
                font_style: 'H4'
                halign: 'center'
                theme_text_color: "Custom"
                text_color: 0, 0.5, 0, 1  # Green color
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: dp(15)
            
            MDTextField:
                id: username
                hint_text: 'Email ID'
                icon_right: 'account'
                size_hint_x: 1
                font_size: dp(18)
                mode: "rectangle"
                line_color_normal: 0, 0.5, 0, 1  # Green color
            
            MDTextField:
                id: password
                hint_text: 'Password'
                size_hint_x: 1
                font_size: dp(18)
                password: True
                mode: "rectangle"
                icon_right: 'eye-off'
                line_color_normal: 0, 0.5, 0, 1  # Green color
                # Removed the on_touch_down event
            
            BoxLayout:
                size_hint: 1, None
                height: dp(20)
                MDLabel:
                    size_hint_x: 0.7
                MDFlatButton:
                    text: "Forget Password?"
                    font_size: dp(12)
                    size_hint_x: 0.3
                    theme_text_color: "Custom"
                    text_color: 0, 0.5, 0, 1  # Green color
                    on_release: app.change_screen('username')
            
            MDRaisedButton:
                text: 'LOGIN'
                size_hint_x: 1
                height: dp(50)
                pos_hint: {'center_x': 0.5}
                md_bg_color: 0, 0.5, 0, 1  # Green color
                on_release: app.login(username.text, password.text)
            
            MDFlatButton:
                text: 'Sign Up'
                pos_hint: {'center_x': 0.5}
                theme_text_color: "Custom"
                text_color: 0, 0.5, 0, 1  # Green color
                on_release: app.change_screen('signup')